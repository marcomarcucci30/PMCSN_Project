%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Lachaise Assignment
% LaTeX Template
% Version 1.0 (26/6/2018)
%
% This template originates from:
% http://www.LaTeXTemplates.com
%
% Authors:
% Marion Lachaise & François Févotte
% Vel (vel@LaTeXTemplates.com)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass{article}

\input{structure.tex} % Include the file specifying the document structure and custom commands

%----------------------------------------------------------------------------------------
%	ASSIGNMENT INFORMATION
%----------------------------------------------------------------------------------------

\title{PMCSN Report} % Title of the assignment

\author{Marco Marcucci\\ \texttt{marco.marcucci96@gmail.com}\\ \texttt{0286352} \and Giuseppe Lasco\\ \texttt{giuseppe.lasco17@gmail.com}\\ \texttt{0286045} \and Valentina Valentina Francesca falaschi\\ \texttt{valentinayffalas@gmail.com}\\ \texttt{0295947}} % Author name and email address

\date{University of Roma Tor Vergata --- \today} % University, school and/or department name(s) and a date

%----------------------------------------------------------------------------------------

\begin{document}

\maketitle % Print the title

%----------------------------------------------------------------------------------------
%	INTRODUCTION
%----------------------------------------------------------------------------------------



\section*{Introduzione} % Unnumbered section
Lo studio ha lo scopo di analizzare due sistemi a code, stocastici e dinamici, che simulano lo scenario di una sala giochi. Il primo caso di studio si riferisce ad un modello base descrivendone il comportamento ed i limiti. Il secondo caso di studio propone un modello avanzato, che ha lo scopo di enfatizzare le differenze e i miglioramenti rispetto al primo caso.
\par L'intera analisi viene condotta procedendo attraverso i passi di modellazione, simulazione ed analisi delle statistiche di output.




%----------------------------------------------------------------------------------------
%	MODELLO BASE
%----------------------------------------------------------------------------------------

\section{Modello Base} % Numbered section

Il modello base si riferisce al comportamento di una sala giochi, al cui interno sono presenti dei videogiochi (arcade). L'accesso alla struttura può avvenire in due modi:
\begin{itemize}
\item Attraverso l'acquisto di un biglietto online, esibendo al momento della prenotazione il proprio green-pass, saltando così i controlli;
\item Attraverso l'acquisto di un biglietto in loco, sottoponendosi al controllo del proprio green-pass oppure, in mancanza di quest'ultimo, al test antigenico rapido. 
\end{itemize}
L'uscita dalla struttura può avvenire in tre modi:
\begin{itemize}
\item In seguito al riscontro della positività al test antigenico rapido;
\item In seguito al riscontro di un green-pass non idoneo;
\item In seguito al completamento della partita.
\end{itemize}
Nei primi due casi, il giocatore esce dal sistema senza pagare il biglietto.
Inoltre, la politica aziendale della sala giochi prevede che il giocatore abbia diritto ad un rimborso del biglietto proporzionale al tempo di attesa che ha sperimentato.
\todo[inline, color=green]{Inserire figura 1 (alto livello)}
%------------------------------------------------

\subsection{Obiettivi}
\label{Goal}
\todo[inline, color=red]{Controllare tutti i parametri definiti}
\par Il primo obiettivo dello studio è quello di massimizzare i profitti della sala giochi. A tale scopo è stata definita una funzione guadagno:

\begin{equation}
\begin{split}
   G = costo\; biglietto \;*\; \#giocatori\; -\; costo\; elettricit\grave a \;*\; \#arcade \;attivi\; - \\-\; \#giocatori \;*\; rimborso \;biglietto(attesa\;media\;nella\;coda)\;*\;costo\;biglietto
\end{split}
\end{equation}
Il costo del biglietto è di 10 \euro . Per quanto riguarda l'elettricità è stata considerata una spesa mensile per Arcade pari a 200 \euro. La funzione \textit{rimborso biglietto}, che calcola la percentuale del \textit{costo biglietto} da restituire al giocatore, è proporzionale al tempo di attesa speso da quest'ultimo in coda. La massima percentuale rimborsabile è del 75\%. L'attesa minima in coda per cui è previsto il rimborso è di 10 minuti. 
\\
\par Il secondo obiettivo dello studio è quello di assicurare un tempo medio di risposta del sistema inferiore a 40 minuti. Infatti, da un calcolo teorico basato sulle caratteristiche del sistema, specificate in seguito, si è dedotto che il tempo medio dei servizi del sistema è di circa 19 minuti. Per cui, è stata impostata una tolleranza del tempo medio di attesa nelle code sperimentato dall'utente, pari a circa il tempo di servizio.



	
%------------------------------------------------

\subsection{Modello Concettuale}
\todo[inline, color=green]{Inserire figura 2 (basso livello)}
La sala giochi è modellata attraverso una rete aperta composta da N nodi rappresentanti i videogiochi e da un nodo rappresentante il controllo Covid-19. Ogni nodo si compone di un servente e di una coda infinita, poiché tale configurazione è la più verosimile.
\\
La struttura è aperta H24 e la giornata è suddivisa in 4 fasce orarie caratterizzate da tassi di arrivo differenti:
\begin{itemize}
\item 08:00-12:00
\item 12:00-17:00
\item 17:00-22:00
\item 22:00-08:00



\end{itemize}
Le variabili di stato del sistema considerate sono:
\begin{itemize}
\item Numero di clienti in ogni nodo;
\item Numero di nodi attivi;
\item Tipologia di cliente.
\end{itemize}
Le code inizialmente vengono considerate vuote, conseguentemente il numero di
clienti ad ogni nodo è 0. La tipologia di ogni cliente (Green-pass, tampone o biglietto online) è decisa aleatoriamente al suo arrivo. I nodi per ogni fase vengono definiti aperti o chiusi in base alla configurazione scelta durante lo studio, che può essere ottima o non
ottima.
\\ \\
Gli eventi considerati sono:
\begin{itemize}
\item Arrivo di un cliente;
\item Completamento di un servizio;
\item Cambio di fascia oraria.
\end{itemize}
Tali eventi possono causare cambiamenti dello stato. L’arrivo di un cliente causa
l’aumento di clienti in un dato nodo e l’aumento del numero di clienti del sistema. Il completamento di un servizio causa il passaggio di un cliente da un
nodo ad un altro o la sua uscita dal sistema. Il cambio di fascia oraria può causare
l’accensione o lo spegnimento degli arcade. Se un nodo arcade viene spento quando ha ancora
clienti in servizio o in coda, questo continuerà a processarli, pur non ricevendo altri
arrivi. Il tempo in cui un nodo arcade idle, ma acceso, viene considerato nel calcolo dei
costi.
\todo[inline, color=red]{Implementare transient\_simulation\_income.py}


\subsection{Modello delle Specifiche}
\todo[inline, color=red]{Controllare tutti i parametri definiti}
Gli arrivi sono modellati con un processo di Poisson, con media variabile a seconda della fascia oraria. In particolare, la media per la prima fascia oraria è di $0.0\overline{6}$  minuti (15 clienti/minuto), la media per la seconda fascia oraria è di $0.2$  minuti (5 clienti/minuto), la media per la terza fascia oraria è di $0.0\overline{6}$   minuti (15 clienti/minuto), la media per la quarta fascia oraria è di $0.0\overline{2}$  minuti (45 clienti/minuto).
\\ \\
La percentuale di clienti con biglietto online è del 20\%. La percentuale di clienti che si sottopone al controllo del  Green-pass è del 0.48\%. La percentuale di clienti che si sottopone al tampone è del 32\%.
\\ \\
La distribuzione del tempo di servizio per il controllo del green-pass è stata modellata
come una distribuzione Normale con media 2 minuti (0.5 passeggeri/minuto) e varianza 1.5 minuti, troncata tra 1 e 3 minuti. 
\\
La distribuzione del tempo di servizio per il tampone è stata modellata
come una distribuzione Normale con media 10 minuti (0.1 passeggeri/minuto) e varianza 1.5 minuti, troncata tra 8 e 12 minuti. 
\\
È stata scelta una Normale troncata con questi valori poiché permette di modellare un'operazione con bassa variabilità e di scartare valori eccessivamente piccoli o grandi che non rispecchierebbero tempi di servizio reali.
\\ \\
La distribuzione del tempo di servizio per un generico arcade è stata modellata
come una distribuzione Normale con media $0.0\overline{6}$ minuti (0.1 passeggeri/minuto) e varianza 3 minuti, troncata tra 3 e 25 minuti.
\\ \\
La percentuale di clienti che risulta positiva al Covid-19 oppure presenta un green-pass non idoneo è in totale del 5\%.
\\ \\
Le probabilità per la scelta del node arcade è stata modellata tramite una distribuzione Uniforme in modo che ciascun servente abbia la stessa probabilità di essere selezionato. Questa scelta permette di mantenere circa la stessa utilizzazione per tutti i serventi dato che hanno lo stesso tasso di servizio.
\\ \\
Si considera un numero di nodi per il controllo Covid-19 pari a 1 ed un numero massimo di nodi arcade pari a 20.


\subsection{Modello Computazionale}
L’approccio di simulazione utilizzato è stato quello Next-Event Simulation. Il linguaggio di programmazione utilizzato è \textit{Python v.3.8}.
Il codice di base per la simulazione segue quanto descritto nell'algoritmo \ref{algo1}. Quest'ultimo si avvale di ulteriori strutture dati e funzioni necessarie al corretto funzionamento.

\begin{algorithm}[H]
\caption{M/G/1 - Rete Aperta - Scheduling FIFO}\label{algo1}
\begin{algorithmic}[1]
\Procedure{Modello Base}{}
\State $\textit{Inizializzazione clock}$
\State $\textit{Inizializzazione lista dei nodi}$
\State $\textit{Inizializzazione struttura Integrali}$
\State $\textit{Selezione nodo su cui generare il primo arrivo}$
\State $\textit{Generazione primo arrivo}$
\While{\textit{ultimo arrivo $<$ STOP} \textbf{or} \textit{ci sono job nel sistema}}
  \State $\textit{Scelta del prossimo evento}$
  \For{$i\gets 0, \textit{numero nodi}$}
    \If{$\textit{nodi non vuoti}$}
      \State $\textit{Aggiornamento statistiche}$
    \EndIf

  \EndFor
  \State $\textit{Avanzamento del clock}$
  \If{\textit{Evento} $= Arrivo$} \Comment{Arrivo}
    \If{\textit{Evento} $= \textit{Cambio fascia oraria}$}
      \State $\textit{Selezione tasso arrivi corretto}$
    \EndIf
    \State $\textit{Aggiornamento stato nodo}$
    \State $\textit{Aggiornamento stato sistema}$
    \State $\textit{Schedulazione prossimo arrivo}$
    \If{\textit{Jobs nel centro} $= 1$}
      \State $\textit{Schedulazione prossimo servizio}$
    \EndIf
  \Else  \Comment{Completamento}
    \State $\textit{Aggiornamento stato nodo}$
    \If{\textit{Nodo Arcade}}
      \State $\textit{Aggiornamento stato sistema}$
    \EndIf
    \If{\textit{Jobs nel centro} $> 0$}
      \State $\textit{Schedulazione prossimo servizio}$
    \EndIf
    \If{\textit{Nodo Covid-Check}}
      \If{\textit{Covid test negativo }\text{\textbf{and}} \textit{Green-pass valido}}
        \State $\textit{Aggiornamento stato sistema}$
      \EndIf
    \EndIf
  \EndIf
\EndWhile
\EndProcedure
\end{algorithmic}
\end{algorithm}


\subsection{Verifica}
Le strutture e le funzioni precedentemente accennate sono state sottoposte ad una fase di testing in modo da garantire il loro corretto funzionamento. Durante l'implementazione del progetto, l'applicazione iterativa di tale fase ha permesso di individuare e correggere diversi difetti, emersi a seguito del manifestarsi di malfunzionamenti del sistema.

\subsection{Validazione}
Al fine di validare il modello implementato, sono state eseguite diversi run variando determinati parametri. I risultati possono essere osservati in tabella \ref{tab1} e \ref{tab2}.

\begin{table}[htbp]
\caption{System statistics}
\begin{center}
\begin{tabular}{|c|c|c|c|}
\hline
\textbf{\# nodi arcades} & \textbf{avg interarrival time} & \textbf{avg wait} & \textbf{avg \# node} \\ \hline
\textbf{2} & 15.042965 & 26.475121 & 1.759960 \\ \hline
\textbf{5} & 15.042963 & 21.542646 & 1.432069 \\ \hline
\textbf{9} & 15.042963 & 20.694456 & 1.375685 \\ \hline
\multicolumn{4}{l}{$^{\mathrm{*}}$ $seed=1234567891, \lambda_{system} =\frac{1}{15} , \# jobs=482453, $}
\end{tabular}
\label{tab1}
\end{center}
\end{table}

Per quanto riguarda la tabella \ref{tab1}, è possibile evincere come il tempo di interarrivo medio del sistema converga al parametro impostato $\lambda_{system}^{-1}$.


\begin{table}[htbp]
\caption{Arcade statistics}
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|c|}
\hline
\textbf{\# nodi arcades} & \textbf{avg interarrival time} & \textbf{avg wait} & \textbf{avg delay} & \textbf{avg \# node} & \textbf{avg \# queue} & \textbf{utilization} \\ \hline
\textbf{2} & 31.347341 & 21.898857 & 6.903420 & 0.698586 & 0.2202234 & 0.478363\\ \hline
\textbf{5} & 78.255828 & 16.770644 & 1.788041 & 0.214305 & 0.022849 & 0.191456\\ \hline
\textbf{9} & 141.269751 & 15.911570 & 0.900827 & 0.112629 & 0.006376 & 0.106252\\ \hline
\multicolumn{7}{l}{$^{\mathrm{*}}$ $seed=1234567891, \lambda_{system} =\frac{1}{15} , \# jobs=482453, $}
\end{tabular}
\label{tab2}
\end{center}
\end{table}


Per quanto riguarda la tabella \ref{tab2}, si può notare come la relazione di Little sia soddisfatta e come l'utilizzazione e il tempo di interarrivo medio, rispettivamente, decresca ed aumenti al crescere del numero del numero degli arcade. Tale comportamento è giustificato dal fatto che i jobs vengono distribuiti in modo equiprobabile tra i diversi nodi arcade.
\\ \\
Come è possibile osservare dalle tabelle, inoltre, all'aumentare dei nodi nel sistema i tempi di attesa e il numero di jobs nei rispettivi centri diminuisce coerentemente a ciò che ci si aspetta.

\subsection{Esperimenti di Simulazione}
%----Introduzione
Al fine di raggiungere gli obiettivi prefissati, è utile dedurre il minimo numero di nodi che permette al sistema di raggiungere la stazionarietà e, in seguito, ricavare la configurazione ottimale del sistema.

Il raggiungimento della stazionarietà o meno viene studiato attraverso l'impiego dell'analisi a orizzonte finito, mentre quella a orizzonte infinito permette di confrontare le configurazioni del sistema a partire dai risultati ottenuti dal comportamento transiente.
\subsubsection{Analisi del comportamento transiente}
%----Minimo n per stazionarietà
Attraverso l'analisi del comportamento transiente viene studiato il tempo medio di risposta del sistema, per ogni fascia oraria, utilizzando il metodo delle repliche.
In particolare, vengono effettuate run di simulazione
consecutive, utilizzando ogni volta come punto di partenza lo stato del sistema raggiunto dalla replica precedente. Il seed, infatti, viene settato una volta, all'inizio della prima replica.
La tecnica delle repliche permette di calcolare stime puntuali e intervallari ad ogni acquisizione, ognuna di queste corrispondente ad un certo numero di richieste processate.

Una prima analisi ha portato ad osservare che il sistema non può raggiungere la stazionarietà per via dei limiti introdotti dalla coda del controllo Covid-19, essendo unica per modellazione. Infatti, per un $\lambda_{arrival} \gtrsim \frac{1}{4.1}$, l'utilizzazione di tale centro è approssimativamente pari ad 1, mentre quella dei centri Arcade risulta essere inferiore. Questo studio permette di concludere che il collo di bottiglia è rappresentato dalla coda del controllo Covid-19, per questo motivo, segue solamente lo studio dei nodi Arcade, considerando un $\lambda_{arrival} < \frac{1}{4.1}$.
\\ \\
Per quanto riguarda la prima fascia e la terza fascia oraria, rispettivamente (08:00-12:00) e (17:00-22:00), è possibile osservare i risultati dell'analisi in figura \ref{figura:avg_ws_mor_ns} e figura \ref{figura:avg_ws_mor_s}. Tali fasce, infatti, hanno lo stesso $\lambda_{arrival}$ da modellazione.

\begin{figure}[H]
\centering
\captionsetup{justification=centering,margin=2cm}
\includegraphics[scale=0.48]{images/transient_mor_ns.png}
\caption{Average Wait System, 08:00-12:00 \& 17:00-22:00, $\lambda_{arrival}=\frac{1}{14} \frac{job}{min}$, Arcades: 1, repliche=64, Sampling\_freq=75}\label{figura:avg_ws_mor_ns}
\end{figure}
\begin{figure}[H]
\centering
\captionsetup{justification=centering,margin=2cm}
\includegraphics[scale=0.48]{images/transient_mor_s.png}
\caption{Average Wait System, 08:00-12:00 \& 17:00-22:00, $\lambda_{arrival}=\frac{1}{14} \frac{job}{min}$, Arcades: 2, repliche=64, Sampling\_freq=75}\label{figura:avg_ws_mor_s}
\end{figure}

Come si evince dai grafici, il numero minimo di nodi Arcade necessari per il raggiungimento della stazionarietà, nella fascia oraria 08:00-12:00 e 17:00-22:00, è pari a 3. Infatti, nella figura \ref{figura:avg_ws_mor_s} il tempo medio di risposta del sistema assume un comportamento stabile dopo il processamento di circa $5000$ jobs. Inoltre, sono stati utilizzati 3 seed iniziali diversi, in modo tale da simulare il comportamento in condizioni aleatorie differenti.Tali considerazioni, con le dovute differenze, valgono per le altre fasce orarie.
\\ \\
Per quanto riguarda la seconda fascia oraria (12:00-17:00), è possibile osservare i risultati dell'analisi in figura \ref{figura:avg_ws_aft_ns} e figura \ref{figura:avg_ws_aft_s}.




\begin{figure}[H]
\centering
\captionsetup{justification=centering,margin=2cm}
\includegraphics[scale=0.48]{images/transient_aft_ns.png}
\caption{Average Wait System, 12:00-17:00, $\lambda_{arrival}=\frac{1}{5} \frac{job}{min}$, Arcades: 2, repliche=64, Sampling\_freq=75}\label{figura:avg_ws_aft_ns}
\end{figure}
\begin{figure}[H]
\centering
\captionsetup{justification=centering,margin=2cm}
\includegraphics[scale=0.48]{images/transient_aft_s.png}
\caption{Average Wait System, 12:00-17:00, $\lambda_{arrival}=\frac{1}{5} \frac{job}{min}$, Arcades: 3, repliche=64, Sampling\_freq=75}\label{figura:avg_ws_aft_s}
\end{figure}


Per quanto riguarda la quarta fascia oraria (22:00-08:00), è possibile osservare i risultati dell'analisi in figura \ref{figura:avg_ws_night_s}.


\begin{figure}[H]
\centering
\captionsetup{justification=centering,margin=2cm}
\includegraphics[scale=0.48]{images/transient_night_s.png}
\caption{Average Wait System, 22:00-08:00, $\lambda_{arrival}=\frac{1}{35} \frac{job}{min}$, Arcades: 1, repliche=64, Sampling\_freq=75}\label{figura:avg_ws_night_s}
\end{figure}

In questo caso, il tempo di risposta medio del sistema si stabilizza anche con l'utilizzo di un solo nodo Arcade.

\subsubsection{Analisi del comportamento stazionario}
%----Massimizzazione del guadagno
Attraverso l'analisi del comportamento stazionario si vuole trovare la configurazione ottima di nodi arcade, per ogni fascia oraria, che permetta di raggiungere gli obiettivi prefissati in \ref{Goal}, partendo dai risultati ottenuti dallo studio precedente.
In questa fase sono state effettuate simulazioni con tempi
d’osservazione molto lunghi, utilizzando la tecnica delle batch-means per ottenere delle stime degli indici di prestazione in regime stazionario, evitando la problematica del bias dovuto alle condizioni iniziali del sistema. Cruciale in questa fase la scelta di due parametri: \textit{b} e \textit{k}, rispettivamente la grandezza del batch e il numero di batch in cui si divide la simulazione. Per la scelta di \textit{b} è stata utilizzata la linea guida di Banks, Carson, Nelson, e Nicol (2001), la quale afferma che il batch size venga aumentato fintantoché l'autocorrelazione a lag 1 tra batch means sia minore di 0.2. Nel caso in esame è stato constatato che tale direttiva viene rispettata con un \textit{b} pari a 256. Nonostante ciò, è stato scelto un valore di \textit{b} pari a 512 al fine di ridurre maggiormente la dipendenza tra i batch.
\todo[inline, color=red]{Controllare ultima frase}
Per la scelta del parametro \textit{k} è stato usato il valore pari a 64 come consigliato dalle linee guida.

In seguito per ogni fascia oraria viene riportato il grafico relativo alla funzione guadagno e del tempo medio di risposta del sistema al variare del numero di nodi Arcade, mediata su i seed. L'asse y "income" riportato nelle figure non rappresenta l'effettivo guadagno della sala giochi in una specifica fascia oraria, che verrà analizzato in uno studio successivo, ma esprime l'effettivo andamento del guadagno, utile ad individuare la miglior configurazione da utilizzare.
\\ \\
Per quanto riguarda la prima fascia e la terza fascia oraria, rispettivamente (08:00-12:00) e (17:00-22:00), è possibile osservare i risultati dell'analisi in figura  figura \ref{figura:avg_wait_sys_mor}. Tali fasce, infatti, hanno lo stesso $\lambda_{arrival}$ da modellazione.
\begin{figure}[H]
	\centering
	\captionsetup{justification=centering,margin=2cm}
	\includegraphics[scale=0.48]{images/avg_wait_sys_mor.png}
	\caption{Income, 08:00-12:00 \& 17:00-22:00, $\lambda_{arrival}=\frac{1}{14} \frac{job}{min}$, b=256, k=64}\label{figura:avg_wait_sys_mor}
\end{figure}

\todo[inline, color=red]{Usare 1 seed o fare la media??}
Come si evince dal grafico, il numero ottimale di nodi Arcade per la prima e la terza fascia oraria, che permette di raggiungere entrambi gli obiettivi prefissati, è pari a 5.
\\ \\
Per quanto riguarda la seconda fascia oraria (12:00-17:00), è possibile osservare i risultati dell'analisi in figura \ref{figura:avg_wait_sys_aft}.
\begin{figure}[H]
	\centering
	\captionsetup{justification=centering,margin=2cm}
	\includegraphics[scale=0.48]{images/avg_wait_sys_aft.png}
	\caption{Income, 12:00-17:00, $\lambda_{arrival}=\frac{1}{5} \frac{job}{min}$, b=256, k=64}\label{figura:avg_wait_sys_aft}
\end{figure}
Il numero ottimale di server Arcade, per la seconda fascia oraria, è pari a 10.
\\ \\
Per quanto riguarda la quarta fascia oraria (22:00-08:00), è possibile osservare i risultati dell'analisi in figura \ref{figura:avg_wait_sys_night}.
\begin{figure}[H]
	\centering
	\captionsetup{justification=centering,margin=2cm}
	\includegraphics[scale=0.48]{images/avg_wait_sys_night.png}
	\caption{Income, 22:00-08:00, $\lambda_{arrival}=\frac{1}{35} \frac{job}{min}$, b=256, k=64}\label{figura:avg_wait_sys_night}
\end{figure}
In questo caso, il numero ottimale di server Arcade da utilizzare è pari a 3.
\\ \\
In tabella \ref{tab3} è possibile individuare la configurazione ottimale dei nodi Arcade, per ogni fascia oraria.

\begin{table}[htbp]
\caption{Configurazione ottimale}
\begin{center}
\begin{tabular}{|c|c|}
\hline
\textbf{Fascia oraria} & \textbf{Configurazione ottimale $^{\mathrm{*}}$} \\ \hline
\textbf{08:00-12:00}  & 5 \\ \hline
\textbf{12:00-17:00}  & 10 \\ \hline
\textbf{17:00-22:00}  & 5 \\ \hline
\textbf{22:00-08:00} & 3 \\ \hline
\multicolumn{2}{l}{$^{\mathrm{*}}$ \textit{Numero di nodi Arcade nel sistema.}}
\end{tabular}
\label{tab3}
\end{center}
\end{table}
Sono stati effettuati run con seed diversi con la configurazione ottimale, precedentemente ricavata, per studiare il tempo di risposta medio, per ogni fascia oraria, con un intervallo di confidenza pari al $95\%$.

\begin{figure}[H]
	\centering
	\captionsetup{justification=centering,margin=2cm}
	\includegraphics[scale=0.48]{images/avg_ws_steady_state_mor.png}
	\caption{Average Wait System,, 08:00-12:00 \& 17:00-22:00, $\lambda_{arrival}=\frac{1}{14} \frac{job}{min}$, b=256, k=64}\label{figura:avg_ws_steady_state_mor}
\end{figure}

\begin{figure}[H]
	\centering
	\captionsetup{justification=centering,margin=2cm}
	\includegraphics[scale=0.48]{images/avg_ws_steady_state_aft.png}
	\caption{Average Wait System,, 12:00-17:00, $\lambda_{arrival}=\frac{1}{5} \frac{job}{min}$, b=256, k=64}\label{figura:avg_ws_steady_state_eve}
\end{figure}

\begin{figure}[H]
	\centering
	\captionsetup{justification=centering,margin=2cm}
	\includegraphics[scale=0.48]{images/avg_ws_steady_state_night.png}
	\caption{Average Wait System,, 22:00-08:00, $\lambda_{arrival}=\frac{1}{35} \frac{job}{min}$, b=256, k=64}\label{figura:avg_ws_steady_state_night}
\end{figure}

\subsubsection{Analisi guadagno giornaliero}
Attraverso questa analisi viene effettuata una simulazione concreta di una tipica giornata lavorativa, con tre configurazioni differenti:
\begin{itemize}
	\item Configurazione minima;
	\item Configurazione ottimale;
	\item Configurazione massima.
\end{itemize} 
È possibile osservare il risultato di tale analisi in figura \ref{figura:ts_min}, \ref{figura:ts_optimal} e \ref{figura:ts_max}.
\begin{figure}[H]
	\centering
	\captionsetup{justification=centering,margin=2cm}
	\includegraphics[scale=0.48]{images/ts_min.png}
	\caption{Average Wait System \& Income Daily, minimal configuration}\label{figura:ts_min}
\end{figure}
\begin{figure}[H]
	\centering
	\captionsetup{justification=centering,margin=2cm}
	\includegraphics[scale=0.48]{images/ts_optimal.png}
	\caption{Average Wait System \& Income Daily, optimal configuration}\label{figura:ts_optimal}
\end{figure}
\begin{figure}[H]
	\centering
	\captionsetup{justification=centering,margin=2cm}
	\includegraphics[scale=0.48]{images/ts_max.png}
	\caption{Average Wait System \& Income Daily, maximum configuration}\label{figura:ts_max}
\end{figure}
Come si evince da tali risultati, oltre a rispettare i QoS imposti, la configurazione ottimale porta ad un guadagno giornaliero migliore. Inoltre, si può osservare come il tempo di risposta medio del sistema della configurazione massimale è comparabile con quello della configurazione ottimale, nonostante quest'ultimo abbia un numero minore di nodi Arcade.

\section{Implementation}

Proin lobortis efficitur dictum. Pellentesque vitae pharetra eros, quis dignissim magna. Sed tellus leo, semper non vestibulum vel, tincidunt eu mi. Aenean pretium ut velit sed facilisis. Ut placerat urna facilisis dolor suscipit vehicula. Ut ut auctor nunc. Nulla non massa eros. Proin rhoncus arcu odio, eu lobortis metus sollicitudin eu. Duis maximus ex dui, id bibendum diam dignissim id. Aliquam quis lorem lorem. Phasellus sagittis aliquet dolor, vulputate cursus dolor convallis vel. Suspendisse eu tellus feugiat, bibendum lectus quis, fermentum nunc. Nunc euismod condimentum magna nec bibendum. Curabitur elementum nibh eu sem cursus, eu aliquam leo rutrum. Sed bibendum augue sit amet pharetra ullamcorper. Aenean congue sit amet tortor vitae feugiat.

In congue risus leo, in gravida enim viverra id. Donec eros mauris, bibendum vel dui at, tempor commodo augue. In vel lobortis lacus. Nam ornare ullamcorper mauris vel molestie. Maecenas vehicula ornare turpis, vitae fringilla orci consectetur vel. Nam pulvinar justo nec neque egestas tristique. Donec ac dolor at libero congue varius sed vitae lectus. Donec et tristique nulla, sit amet scelerisque orci. Maecenas a vestibulum lectus, vitae gravida nulla. Proin eget volutpat orci. Morbi eu aliquet turpis. Vivamus molestie urna quis tempor tristique. Proin hendrerit sem nec tempor sollicitudin.

% File contents
\begin{file}[hello.py]
\begin{lstlisting}[language=Python]
#! /usr/bin/python

import sys
sys.stdout.write("Hello World!\n")
\end{lstlisting}
\end{file}

Fusce eleifend porttitor arcu, id accumsan elit pharetra eget. Mauris luctus velit sit amet est sodales rhoncus. Donec cursus suscipit justo, sed tristique ipsum fermentum nec. Ut tortor ex, ullamcorper varius congue in, efficitur a tellus. Vivamus ut rutrum nisi. Phasellus sit amet enim efficitur, aliquam nulla id, lacinia mauris. Quisque viverra libero ac magna maximus efficitur. Interdum et malesuada fames ac ante ipsum primis in faucibus. Vestibulum mollis eros in tellus fermentum, vitae tristique justo finibus. Sed quis vehicula nibh. Etiam nulla justo, pellentesque id sapien at, semper aliquam arcu. Integer at commodo arcu. Quisque dapibus ut lacus eget vulputate.

% Command-line "screenshot"
\begin{commandline}
	\begin{verbatim}
		$ chmod +x hello.py
		$ ./hello.py

		Hello World!
	\end{verbatim}
\end{commandline}

Vestibulum sodales orci a nisi interdum tristique. In dictum vehicula dui, eget bibendum purus elementum eu. Pellentesque lobortis mattis mauris, non feugiat dolor vulputate a. Cras porttitor dapibus lacus at pulvinar. Praesent eu nunc et libero porttitor malesuada tempus quis massa. Aenean cursus ipsum a velit ultricies sagittis. Sed non leo ullamcorper, suscipit massa ut, pulvinar erat. Aliquam erat volutpat. Nulla non lacus vitae mi placerat tincidunt et ac diam. Aliquam tincidunt augue sem, ut vestibulum est volutpat eget. Suspendisse potenti. Integer condimentum, risus nec maximus elementum, lacus purus porta arcu, at ultrices diam nisl eget urna. Curabitur sollicitudin diam quis sollicitudin varius. Ut porta erat ornare laoreet euismod. In tincidunt purus dui, nec egestas dui convallis non. In vestibulum ipsum in dictum scelerisque.

% Warning text, with a custom title
\begin{warn}[Notice:]
  In congue risus leo, in gravida enim viverra id. Donec eros mauris, bibendum vel dui at, tempor commodo augue. In vel lobortis lacus. Nam ornare ullamcorper mauris vel molestie. Maecenas vehicula ornare turpis, vitae fringilla orci consectetur vel. Nam pulvinar justo nec neque egestas tristique. Donec ac dolor at libero congue varius sed vitae lectus. Donec et tristique nulla, sit amet scelerisque orci. Maecenas a vestibulum lectus, vitae gravida nulla. Proin eget volutpat orci. Morbi eu aliquet turpis. Vivamus molestie urna quis tempor tristique. Proin hendrerit sem nec tempor sollicitudin.
\end{warn}

%----------------------------------------------------------------------------------------

\end{document}
